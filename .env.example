# Copy to .env and fill in values. Do not commit .env or real secrets.
#
# Deployment modes:
#   Dedicated (single-tenant): Do NOT set TENANT_REGISTRY_DB_URL. Required: DB_*, JWT_SECRET_*, NODE_ENV. Optional: DEDICATED_TENANT_ID, DB_POOL_*, DB_SSL_*.
#   Shared (multi-tenant):     Set TENANT_REGISTRY_DB_URL and MASTER_ENCRYPTION_KEY. Required: DB_*, JWT_SECRET_*, Registry URL, encryption key. Optional: ADMIN_API_KEY, DB_POOL_*, REGISTRY_DB_POOL_MAX.

# Server
NODE_ENV=production
PORT=9090
FRONTEND_URL=https://your-frontend.com

# Database – use either DATABASE_URL or DB_* vars
# DATABASE_URL=postgres://user:pass@host:5432/dbname
DB_HOST=your-db-host
DB_PORT=5432
DB_NAME=your-db-name
DB_USER=your-db-user
DB_PASS=your-db-password

# DB SSL (Aiven / managed Postgres): set in production env on your cloud host.
# Paste full PEM content with newlines as \n (e.g. "-----BEGIN CERTIFICATE-----\n...\n-----END CERTIFICATE-----").
# DB_SSL_CA="-----BEGIN CERTIFICATE-----\n...\n-----END CERTIFICATE-----"

# Optional: local dev only – path to ca.pem file (file must exist, not committed).
# DB_SSL_CA_PATH=./src/config/ca.pem

# Connection pool: applies to main DB and (in shared mode) per-tenant pools. Keep low for managed Postgres (e.g. Aiven) to avoid "remaining connection slots reserved for SUPERUSER".
# When cloud and local both use the SAME DB: set DB_POOL_MAX=2 (or 3) for local dev so cloud (5) + local (2) fits the limit. Production/cloud can use 5.
# Stop the API on all instances before running npm run db:release-connections. Avoid killing the process with SIGKILL (kill -9); use Ctrl+C or SIGTERM so connections close on exit.
# DB_POOL_MAX=5
# DB_POOL_MIN=0

# Auth
JWT_SECRET_ACCESS_TOKEN=your-secret
JWT_SECRET_REFRESH_TOKEN=your-secret
# Optional: access token expiry (e.g. 7d, 15m). Default in code is 7d.
# JWT_ACCESS_TOKEN_EXPIRY=7d

# Multi-tenant (shared mode): set when running one app for multiple tenants. Total connections = main pool + registry pool + (per-tenant pool × tenants).
# TENANT_REGISTRY_DB_URL=postgres://user:pass@host:5432/registry_db
# MASTER_ENCRYPTION_KEY=32-byte-hex-or-long-secret-for-tenant-credentials
# REGISTRY_DB_POOL_MAX=5

# Dedicated mode: single tenant per app. Optional tenant id for JWT.
# DEDICATED_TENANT_ID=optional-uuid

# Admin API (optional): key for Tenant Management UI. Send as Authorization: Bearer <key> or x-admin-api-key.
# ADMIN_API_KEY=

# Bucket (S3-compatible: R2, Spaces, etc.)
# BUCKET_ENDPOINT=...
# BUCKET_NAME=...
# BUCKET_ACCESS_KEY_ID=...
# BUCKET_SECRET_ACCESS_KEY=...
# BUCKET_REGION=auto

# Add other vars (GOOGLE_*, BREVO_*, etc.) as needed.
